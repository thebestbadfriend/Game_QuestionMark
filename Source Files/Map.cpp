#include "..\Header Files\Map.h"
#include "..\Header Files\TextureManager.h"

int Lvl1[25][30] = {
   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
   {0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0},
   {0,0,0,0,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,0,0,0,0,0,0,0},
   {0,0,0,0,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,0,0,0,0,0,0,0},
   {0,0,0,0,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,0,0,0,0,0,0,0},
   {0,0,0,0,1,2,2,2,2,2,2,1,1,1,1,2,2,2,2,2,2,2,1,0,0,0,0,0,0,0},
   {0,0,0,0,1,2,2,2,2,2,2,1,0,0,1,2,2,2,2,2,2,2,1,0,0,0,0,0,0,0},
   {0,0,0,0,1,2,2,2,2,2,2,1,1,1,1,2,2,2,2,2,2,2,1,0,0,0,0,0,0,0},
   {0,0,0,0,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,0,0,0,0,0,0,0},
   {0,0,0,0,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,0,0,0,0,0,0,0},
   {0,0,0,0,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,0,0,0,0,0,0,0},
   {0,0,0,0,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,0,0,0,0,0,0,0},
   {0,0,0,0,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,0,0,0,0,0,0,0},
   {0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0},
   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}
};

Map::Map()
{
    water = TextureManager::LoadTexture("Images\\water.png");
    dirt = TextureManager::LoadTexture("Images\\dirt.png");
    grass = TextureManager::LoadTexture("Images\\grass.png");

    LoadMap(Lvl1);
}

void Map::LoadMap(int level[25][30])
{
    for (int row = 0; row < 25; row++) {
        for (int column = 0; column < 30; column++) {
            tileSet[row][column] = level[row][column];
        }
    }
}

void Map::DrawMap()
{
    SDL_Rect srcRect, dstRect;
    SDL_Texture* tileTexture = nullptr;

    srcRect.w = dstRect.w = 32;
    srcRect.h = dstRect.h = 32;
    srcRect.x = dstRect.x = 0;
    srcRect.y = dstRect.y = 0;

    for (int row = 0; row < 25; row++) {
        for (int column = 0; column < 30; column++) {
            dstRect.y = row * dstRect.h;
            dstRect.x = column * dstRect.w;
            switch (tileSet[row][column]) {
            case 0:
                tileTexture = water;
                break;
            case 1:
                tileTexture = dirt;
                break;
            case 2:
                tileTexture = grass;
                break;
            }
            TextureManager::Draw(tileTexture, &srcRect, &dstRect);
        }
    }
}
